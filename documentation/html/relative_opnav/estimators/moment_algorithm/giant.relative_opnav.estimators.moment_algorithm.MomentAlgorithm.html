<!DOCTYPE html>

<html lang="en" data-content_root="../../../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>MomentAlgorithm &#8212; GIANT 2.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../../../_static/basic.css?v=3f530b75" />
    <link rel="stylesheet" type="text/css" href="../../../_static/alabaster.css?v=aae3c237" />
    <link rel="stylesheet" type="text/css" href="../../../_static/graphviz.css?v=4ae1632d" />
    <script src="../../../_static/documentation_options.js?v=51b770b3"></script>
    <script src="../../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="../../../_static/logo.ico"/>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="copyright" title="Copyright" href="../../../copyright.html" />
    <link rel="next" title="MomentAlgorithm.compute_line_of_sight_sun_image" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image.html" />
    <link rel="prev" title="MomentAlgorithmOptions" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions.html" />
   
  <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../../index.html">
    <img class="logo" src="../../../_static/logo.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">A powerful API for Optical Navigation</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../installation.html">Installing GIANT</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../giant.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../giant.html#indices">Indices</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../copyright.html">Copyright</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../../index.html">Documentation overview</a><ul>
  <li><a href="../../../giant.html">API Reference</a><ul>
  <li><a href="../../../giant.relative_opnav.html">giant.relative_opnav</a><ul>
  <li><a href="../../giant.relative_opnav.estimators.html">estimators</a><ul>
  <li><a href="../giant.relative_opnav.estimators.moment_algorithm.html">moment_algorithm</a><ul>
      <li>Previous: <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions.html" title="previous chapter">MomentAlgorithmOptions</a></li>
      <li>Next: <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image.html" title="next chapter">MomentAlgorithm.compute_line_of_sight_sun_image</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions.html" title="Previous document">MomentAlgorithmOptions</a>
        </li>
        <li>
          <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image.html" title="Next document">MomentAlgorithm.compute_line_of_sight_sun_image</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="momentalgorithm">
<h1>MomentAlgorithm<a class="headerlink" href="#momentalgorithm" title="Link to this heading">¶</a></h1>
<p><a class="reference internal" href="../giant.relative_opnav.estimators.moment_algorithm.html#module-giant.relative_opnav.estimators.moment_algorithm" title="giant.relative_opnav.estimators.moment_algorithm"><code class="xref py py-mod docutils literal notranslate"><span class="pre">giant.relative_opnav.estimators.moment_algorithm</span></code></a>:</p>
<dl class="py class">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">giant.relative_opnav.estimators.moment_algorithm.</span></span><span class="sig-name descname"><span class="pre">MomentAlgorithm</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">scene</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">camera</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../../_modules/giant/relative_opnav/estimators/moment_algorithm.html#MomentAlgorithm"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm" title="Link to this definition">¶</a></dt>
<dd><p>This class implements GIANT’s version of moment based center finding for extracting bearing measurements to resolved
or or unresolved targets in an image.</p>
<p>The class provides an interface to perform moment based center for each target body that is predicted to be in an
image.  It does this by looping through each target object contained in the <a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene.target_objs" title="giant.ray_tracer.scene.Scene.target_objs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Scene.target_objs</span></code></a> attribute
that is is requested.  For each of the targets, the algorithm:</p>
<ol class="arabic simple">
<li><p>Predicts the location of the target in the image using the a priori knowledge of the scene</p></li>
<li><p>Predicts the apparent area of the target in the scene assuming a spherical target.</p></li>
<li><p>Segments the image into foreground/background objects using the smallest expected apparent area of all
targets as the minimum segment area.  This is done using <code class="xref py py-meth docutils literal notranslate"><span class="pre">ImageProcessing.segment_image()</span></code></p></li>
<li><p>Identifies the closest foreground segment to the predicted target location that is also within the user
specified search radius.  If the closest segment is also the closest segment for another target in the image,
then both targets are recorded as not found.  If no segments are within the search radius of the predicted
target center then the target is marked as not found.</p></li>
<li><p>Takes the foreground objects around the identified segment and finds the centroid of the illuminated areas
using a moment algorithm to compute the observed center of brightness.</p></li>
<li><p>If requested, corrects the observed center of brightness to the observed center of figure using the
<a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction"><code class="xref py py-meth docutils literal notranslate"><span class="pre">compute_phase_correction()</span></code></a>.</p></li>
</ol>
<p>For more details on the image segmentation, along with possible tuning parameters, refer to the
<code class="xref py py-meth docutils literal notranslate"><span class="pre">ImageProcessing.segment_image()</span></code> documentation.</p>
<p>The search radius is controlled by <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.search_distance" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.search_distance"><code class="xref py py-attr docutils literal notranslate"><span class="pre">search_distance</span></code></a> attribute.  This should be a number or <code class="docutils literal notranslate"><span class="pre">None</span></code>.
If this is not <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the distance from the centroid of the nearest segment to the predicted target u
location must be less than this value.  Therefore, you should set this value to account for the expected
center-of-figure to center-of-brightness shift as well as the uncertainty in the a priori location of the target
in the scene, while being careful not to set too large of a value if there are multiple targets in the scene to
avoid ambiguity.  If this is <code class="docutils literal notranslate"><span class="pre">None</span></code>, then the closest segment is always paired with the target (there is no
search region considered) unless the segment has already been paired to another target in the scene.</p>
<p>This technique can predict what the minimum segment area should be in the image using the predicted apparent areas
for each target.  This can be useful to automatically set the <code class="xref py py-attr docutils literal notranslate"><span class="pre">ImageProcessing.minimum_segment_area</span></code> based on
the targets and the a priori location in the camera frame.  Because this is just an approximation, a margin of
safety is included with <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apparent_area_margin_of_safety" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apparent_area_margin_of_safety"><code class="xref py py-attr docutils literal notranslate"><span class="pre">apparent_area_margin_of_safety</span></code></a>, which is used to shrink the predicted apparent area
to account for the assumptions about the spherical target and possible errors in the a priori scene information.
You can turn off this feature and just use the set minimum segment area by setting <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.use_apparent_area" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.use_apparent_area"><code class="xref py py-attr docutils literal notranslate"><span class="pre">use_apparent_area</span></code></a> to
<code class="docutils literal notranslate"><span class="pre">False</span></code>.</p>
<p>Whether the phase correction is applied or not is controlled by the boolean flag <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction"><code class="xref py py-attr docutils literal notranslate"><span class="pre">apply_phase_correction</span></code></a>.
The information that is passed to the phase correction routines are controlled by the <code class="xref py py-attr docutils literal notranslate"><span class="pre">phase_correction_type</span></code>
and <code class="xref py py-attr docutils literal notranslate"><span class="pre">brdf</span></code> attributes.</p>
<p>When all of the required data has been successfully loaded into an instance of this class, the <a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate()</span></code></a>
method is used to extract the observed centers of the target bodies predicted to be in the requested image.  The
results are stored into the <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observed_bearings" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observed_bearings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">observed_bearings</span></code></a> attribute. In addition, the predicted location for each target
is stored in the <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.computed_bearings" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.computed_bearings"><code class="xref py py-attr docutils literal notranslate"><span class="pre">computed_bearings</span></code></a> attribute. Finally, the details about the fit are stored as a
dictionary in the appropriate element in the <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.details" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.details"><code class="xref py py-attr docutils literal notranslate"><span class="pre">details</span></code></a> attribute.  Specifically, these dictionaries will
contain the following keys.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Key</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'Fit'</span></code></p></td>
<td><p>The fit moment object.  Only available if successful.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'Phase</span> <span class="pre">Correction'</span></code></p></td>
<td><p>The phase correction vector used to convert from center of brightness to center of figure.
This will only be available if the fit was successful.  If <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction"><code class="xref py py-attr docutils literal notranslate"><span class="pre">apply_phase_correction</span></code></a> is
<code class="docutils literal notranslate"><span class="pre">False</span></code> then this will be an array of 0.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'Observed</span> <span class="pre">Area'</span></code></p></td>
<td><p>The area (number of pixels that were considered foreground) observed for this target.
This is only available if the fit was successful.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'Predicted</span> <span class="pre">Area'</span></code></p></td>
<td><p>The area (number of pixels that were considered foreground) predicted for this target.
This is only available if the fit was successful.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">'Failed'</span></code></p></td>
<td><p>A message indicating why the fit failed.  This will only be present if the fit failed (so you
could do something like <code class="docutils literal notranslate"><span class="pre">'Failed'</span> <span class="pre">in</span> <span class="pre">moment_algorithm.details[target_ind]</span></code> to check if
something failed.  The message should be a human readable description of what called the
failure.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">'Found</span> <span class="pre">Segments'</span></code></p></td>
<td><p>All of the segments that were found in the image.  This is a tuple of all of the returned
values from <code class="xref py py-meth docutils literal notranslate"><span class="pre">ImageProcessing.segment_image()</span></code>.  This is only included if the fit failed
for some reason.</p></td>
</tr>
</tbody>
</table>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Before calling the <a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate()</span></code></a> method be sure that the scene has been updated to correspond to the correct
image time.  This class does not update the scene automatically.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>scene</strong> (<a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene" title="giant.ray_tracer.scene.Scene"><em>Scene</em></a>) – The <a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene" title="giant.ray_tracer.scene.Scene"><code class="xref py py-class docutils literal notranslate"><span class="pre">Scene</span></code></a> object containing the target, light, and obscuring objects.</p></li>
<li><p><strong>camera</strong> (<a class="reference internal" href="../../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><em>Camera</em></a>) – The <a class="reference internal" href="../../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><code class="xref py py-class docutils literal notranslate"><span class="pre">Camera</span></code></a> object containing the camera model and images to be utilized</p></li>
<li><p><strong>image_processing</strong> – The <code class="xref py py-class docutils literal notranslate"><span class="pre">ImageProcessing</span></code> object to be used to process the images</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions"><em>MomentAlgorithmOptions</em></a><em> | </em><em>None</em>) – A dataclass specifying the options to set for this instance.</p></li>
</ul>
</dd>
</dl>
<dl class="py property">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.camera">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">camera</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><span class="pre">Camera</span></a></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.camera" title="Link to this definition">¶</a></dt>
<dd><p>The camera instance that represents the camera used to take the images we are performing Relative OpNav on.</p>
<p>This is the source of the camera model, and may be used for other information about the camera as well.
See the <a class="reference internal" href="../../../camera/giant.camera.Camera.html#giant.camera.Camera" title="giant.camera.Camera"><code class="xref py py-class docutils literal notranslate"><span class="pre">Camera</span></code></a> property for details.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.generates_templates">
<span class="sig-name descname"><span class="pre">generates_templates</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">False</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.generates_templates" title="Link to this definition">¶</a></dt>
<dd><p>A flag specifying whether this RelNav estimator generates and stores templates in the <code class="xref py py-attr docutils literal notranslate"><span class="pre">templates</span></code> attribute.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.relnav_handler">
<span class="sig-name descname"><span class="pre">relnav_handler</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Callable</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.relnav_handler" title="Link to this definition">¶</a></dt>
<dd><p>A custom handler for doing estimation/packaging the results into the <a class="reference internal" href="../../relnav_class/giant.relative_opnav.relnav_class.RelativeOpNav.html#giant.relative_opnav.relnav_class.RelativeOpNav" title="giant.relative_opnav.relnav_class.RelativeOpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">RelativeOpNav</span></code></a> instance.</p>
<p>Typically this should be <code class="docutils literal notranslate"><span class="pre">None</span></code>, unless the <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">observable_type</span></code></a> is set to 
<a class="reference internal" href="../estimator_interface_abc/giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.html#giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.CUSTOM" title="giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.CUSTOM"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RelNavObservablesType.CUSTOM</span></code></a>, in which case this must be a function where the first and only positional 
argument is the <a class="reference internal" href="../../relnav_class/giant.relative_opnav.relnav_class.RelativeOpNav.html#giant.relative_opnav.relnav_class.RelativeOpNav" title="giant.relative_opnav.relnav_class.RelativeOpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">RelativeOpNav</span></code></a> instance that this technique was registered to and there are 2 key word 
arguments <code class="docutils literal notranslate"><span class="pre">image_ind</span></code> and <code class="docutils literal notranslate"><span class="pre">include_targets</span></code> which should be used to control which image/target is processed.</p>
<p>If <a class="reference internal" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type"><code class="xref py py-attr docutils literal notranslate"><span class="pre">observable_type</span></code></a> is not <a class="reference internal" href="../estimator_interface_abc/giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.html#giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.CUSTOM" title="giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.CUSTOM"><code class="xref py py-attr docutils literal notranslate"><span class="pre">RelNavObservablesType.CUSTOM</span></code></a> then this is ignored whether it is <code class="docutils literal notranslate"><span class="pre">None</span></code> 
or not.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.scene">
<em class="property"><span class="k"><span class="pre">property</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">scene</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene" title="giant.ray_tracer.scene.Scene"><span class="pre">Scene</span></a></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.scene" title="Link to this definition">¶</a></dt>
<dd><p>The scene which defines the a priori locations of all targets and light sources with respect to the camera.</p>
<p>You can assume that the scene has been updated for the appropriate image time inside of the class.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.details">
<span class="sig-name descname"><span class="pre">details</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">Any</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.details" title="Link to this definition">¶</a></dt>
<dd><p>This attribute should provide details from applying the technique to each target in the scene.</p>
<p>The list should be the same length at the <a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene.target_objs" title="giant.ray_tracer.scene.Scene.target_objs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Scene.target_objs</span></code></a>.  Typically, if the technique was not 
applied for some of the targets then the details for the corresponding element should be <code class="docutils literal notranslate"><span class="pre">None</span></code>.  Beyond each
element of the details should typically contain a dictionary providing information about the results that is not
strictly needed for understanding what happened, however, this is not required and you can use whatever 
structure you want to convey the information.  Whatever you do, however, you should clearly document it for each
technique so that the user can know what to expect.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observed_bearings">
<span class="sig-name descname"><span class="pre">observed_bearings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">NONEARRAY</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observed_bearings" title="Link to this definition">¶</a></dt>
<dd><p>A list of the observed bearings in the image where each element corresponds to
the same element in the <a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene.target_objs" title="giant.ray_tracer.scene.Scene.target_objs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Scene.target_objs</span></code></a> list.</p>
<p>The list elements should be numpy arrays or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the the target wasn’t considered for some reason.  If
numpy arrays they should contain the pixel locations as (x, y) or (col, row).  This does not always need to be 
filled out.</p>
<p>This is were you should store results for <code class="docutils literal notranslate"><span class="pre">CENTER-FINDING,</span> <span class="pre">LIMB,</span> <span class="pre">LANDMARK,</span> <span class="pre">CONSTRAINT</span></code> techniques.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.computed_bearings">
<span class="sig-name descname"><span class="pre">computed_bearings</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">NONEARRAY</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.computed_bearings" title="Link to this definition">¶</a></dt>
<dd><p>A list of the computed (predicted) bearings in the image where each element corresponds to
the same element in the <a class="reference internal" href="../../../ray_tracer/scene/giant.ray_tracer.scene.Scene.html#giant.ray_tracer.scene.Scene.target_objs" title="giant.ray_tracer.scene.Scene.target_objs"><code class="xref py py-attr docutils literal notranslate"><span class="pre">Scene.target_objs</span></code></a> list.</p>
<p>The list elements should be numpy arrays or <code class="docutils literal notranslate"><span class="pre">None</span></code> if the the target wasn’t considered for some reason.  If
numpy arrays they should contain the pixel locations as (x, y) or (col, row).  This does not always need to be 
filled out.</p>
<p>This is were you should store results for <code class="docutils literal notranslate"><span class="pre">CENTER-FINDING,</span> <span class="pre">LIMB,</span> <span class="pre">LANDMARK,</span> <span class="pre">CONSTRAINT</span></code> techniques.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.search_distance">
<span class="sig-name descname"><span class="pre">search_distance</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.search_distance" title="Link to this definition">¶</a></dt>
<dd><p>Half of the distance to search around the predicted centers for the observed centers of the target objects in 
pixels.</p>
<p>This is also used to identify ambiguous target to segmented area pairings.  That is, if 2 segmented areas are 
within this value of the predicted center of figure for a target, then that target is treated as not found and a
warning is printed.</p>
<p>If this is <code class="docutils literal notranslate"><span class="pre">None</span></code> then the closest segmented object from the image to the predicted center of figure of the 
target in the image is always chosen.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction">
<span class="sig-name descname"><span class="pre">apply_phase_correction</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apply_phase_correction" title="Link to this definition">¶</a></dt>
<dd><p>A boolean flag specifying whether to apply the phase correction or not</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.use_apparent_area">
<span class="sig-name descname"><span class="pre">use_apparent_area</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">bool</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">True</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.use_apparent_area" title="Link to this definition">¶</a></dt>
<dd><p>A boolean flag specifying whether to use the predicted apparent area (number of pixels) of the illuminated 
target in the image to threshold what is considered a foreground object in the image.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apparent_area_margin_of_safety">
<span class="sig-name descname"><span class="pre">apparent_area_margin_of_safety</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">2</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.apparent_area_margin_of_safety" title="Link to this definition">¶</a></dt>
<dd><p>The margin of safety used to decrease the predicted apparent area for each target.</p>
<p>This value should always be &gt;= 1, as the predicted area is divided by this to get the effective minimum apparent
area for the targets.  This is included to account for errors in the a priori scene/shape model for the targets
as well as the errors introduced by assuming spherical targets.  Since there is only one margin of safety for 
all targets in a scene, you should set this based on the expected worst case for all of the targets.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.technique">
<span class="sig-name descname"><span class="pre">technique</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'moment_algorithm'</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.technique" title="Link to this definition">¶</a></dt>
<dd><p>The name of the technique identifier in the <a class="reference internal" href="../../relnav_class/giant.relative_opnav.relnav_class.RelativeOpNav.html#giant.relative_opnav.relnav_class.RelativeOpNav" title="giant.relative_opnav.relnav_class.RelativeOpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">RelativeOpNav</span></code></a> class.</p>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type">
<span class="sig-name descname"><span class="pre">observable_type</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="../estimator_interface_abc/giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.html#giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType" title="giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType"><span class="pre">RelNavObservablesType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><a class="reference internal" href="../estimator_interface_abc/giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType.html#giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType" title="giant.relative_opnav.estimators.estimator_interface_abc.RelNavObservablesType"><span class="pre">RelNavObservablesType</span></a><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">[RelNavObservablesType.CENTER_FINDING]</span></em><a class="headerlink" href="#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.observable_type" title="Link to this definition">¶</a></dt>
<dd><p>The type of observables this technique generates.</p>
</dd></dl>

</dd></dl>

<p class="rubric">Summary of Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_line_of_sight_sun_image</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_phase_correction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">compute_phase_correction</span></code></a></p></td>
<td><p>The method computes the phase correction assuming a spherical target.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.estimate"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimate</span></code></a></p></td>
<td><p>This method extracts the observed center of figure for each requested target object from the supplied image.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.rastered_phase_correction.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.rastered_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.rastered_phase_correction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">rastered_phase_correction</span></code></a></p></td>
<td><p>This method computes the phase correction by raster rendering the target to determine the offset from the center of illumination to the center of figure.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.reset.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.reset" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.reset"><code class="xref py py-obj docutils literal notranslate"><span class="pre">reset</span></code></a></p></td>
<td><p>This method resets the observed/computed attributes as well as the details attribute to have <code class="docutils literal notranslate"><span class="pre">None</span></code> for each target in <code class="xref py py-attr docutils literal notranslate"><span class="pre">scene</span></code>.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.simple_phase_correction.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.simple_phase_correction" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.simple_phase_correction"><code class="xref py py-obj docutils literal notranslate"><span class="pre">simple_phase_correction</span></code></a></p></td>
<td><p>This method computes the simple phase correction assuming the target is a sphere.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.target_generator.html#giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.target_generator" title="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.target_generator"><code class="xref py py-obj docutils literal notranslate"><span class="pre">target_generator</span></code></a></p></td>
<td><p>This method returns a generator which yields target_index, target pairs that are to be processed based on the input <code class="docutils literal notranslate"><span class="pre">include_targets</span></code>.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithmOptions.html" title="Previous document">MomentAlgorithmOptions</a>
        </li>
        <li>
          <a href="giant.relative_opnav.estimators.moment_algorithm.MomentAlgorithm.compute_line_of_sight_sun_image.html" title="Next document">MomentAlgorithm.compute_line_of_sight_sun_image</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
<div class="footer">
    <div style="display:inline-block;vertical-align:middle;">
        <img src="/_static/NASA_logo.svg" alt="NASA" style="width:80px;height:80px;">
    </div>
    <div style="display:inline-block;vertical-align:middle;">
        &copy;2023 United States Government | 
        NASA Official: <a href="mailto:andrew.j.liounis@nasa.gov">Andrew Liounis</a> |
        Curator: <a href="mailto:andrew.j.liounis@nasa.gov">Andrew Liounis</a>
        <br>
        Last updated on Sep 03, 2025 |
        
        |
        Powered by <a href="http://sphinx-doc.org/">Sphinx 8.2.3</a>
        &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 1.0.0</a>
        
        |
        <a href="https://www.nasa.gov/about/highlights/HP_Privacy.html">Privacy Policy/Notices</a>
    </div>
</div>
  </body>
</html>