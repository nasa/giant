<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>giant.calibration &#8212; GIANT 2.0.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=3f530b75" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=aae3c237" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=4ae1632d" />
    <script src="_static/documentation_options.js?v=51b770b3"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/logo.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="copyright" title="Copyright" href="copyright.html" />
    <link rel="next" title="giant.calibration.calibration_class" href="calibration/giant.calibration.calibration_class.html" />
    <link rel="prev" title="giant.catalogs.utilities.MJD_EPOCH" href="catalogs/utilities/giant.catalogs.utilities.MJD_EPOCH.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="index.html">
    <img class="logo" src="_static/logo.png" alt="Logo" />
    
  </a>
</p>



<p class="blurb">A powerful API for Optical Navigation</p>






<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installing GIANT</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">Getting Started</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="giant.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="giant.html#indices">Indices</a></li>
<li class="toctree-l1"><a class="reference internal" href="license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="copyright.html">Copyright</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  <li><a href="giant.html">API Reference</a><ul>
      <li>Previous: <a href="catalogs/utilities/giant.catalogs.utilities.MJD_EPOCH.html" title="previous chapter">giant.catalogs.utilities.MJD_EPOCH</a></li>
      <li>Next: <a href="calibration/giant.calibration.calibration_class.html" title="next chapter">giant.calibration.calibration_class</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
              <div class="related top">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="catalogs/utilities/giant.catalogs.utilities.MJD_EPOCH.html" title="Previous document">giant.catalogs.utilities.MJD_EPOCH</a>
        </li>
        <li>
          <a href="calibration/giant.calibration.calibration_class.html" title="Next document">giant.calibration.calibration_class</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          

          <div class="body" role="main">
            
  <section id="module-giant.calibration">
<span id="giant-calibration"></span><h1>giant.calibration<a class="headerlink" href="#module-giant.calibration" title="Link to this heading">¶</a></h1>
<p>This package provides the required routines and objects to identify stars in an image and then estimate attitude, camera
pointing alignment, and geometric camera model calibration using the observed stars.</p>
<section id="description">
<h2>Description<a class="headerlink" href="#description" title="Link to this heading">¶</a></h2>
<p>In GIANT, calibration refers primarily to the process of using identified stars in multiple images to estimate the
geometric camera calibration and camera frame alignment.  There are many different sub-steps that need to be performed
for this, particularly with respect to identifying the stars in the image, which can lead to cluttered scripts and hard
to maintain code when everything is thrown together manually.  Luckily, GIANT has done most of this nitty gritty work
for us by creating a simple, single interface in the <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class.</p>
<p>The <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class is a subclass of the <a class="reference internal" href="stellar_opnav/stellar_class/giant.stellar_opnav.stellar_class.StellarOpNav.html#giant.stellar_opnav.stellar_class.StellarOpNav" title="giant.stellar_opnav.stellar_class.StellarOpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">StellarOpNav</span></code></a> class, which provides the functionality for
identifying stars and estimating updated attitude information for single images.  In addition to the
<a class="reference internal" href="stellar_opnav/stellar_class/giant.stellar_opnav.stellar_class.StellarOpNav.html#giant.stellar_opnav.stellar_class.StellarOpNav" title="giant.stellar_opnav.stellar_class.StellarOpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">StellarOpNav</span></code></a> functionality, the <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class also provides the interfaces for using identified
stars in multiple images to estimate updates to geometric camera model (camera calibration,
<a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.estimate_geometric_calibration.html#giant.calibration.calibration_class.Calibration.estimate_geometric_calibration" title="giant.calibration.calibration_class.Calibration.estimate_geometric_calibration"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate_geometric_calibration()</span></code></a>) and the alignment between the camera frame and a base frame
(<a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.estimate_static_alignment.html#giant.calibration.calibration_class.Calibration.estimate_static_alignment" title="giant.calibration.calibration_class.Calibration.estimate_static_alignment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate_static_alignment()</span></code></a> and <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.estimate_temperature_dependent_alignment.html#giant.calibration.calibration_class.Calibration.estimate_temperature_dependent_alignment" title="giant.calibration.calibration_class.Calibration.estimate_temperature_dependent_alignment"><code class="xref py py-meth docutils literal notranslate"><span class="pre">estimate_temperature_dependent_alignment()</span></code></a>).
While these methods make it easy to get everything packaged appropriately, GIANT also exposes all of the substeps to you
if you need them to do a more advanced analysis.</p>
<p>This package level documentation focuses specifically on using the <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class along with tips for
successfully doing camera calibration and alignment.  For more details about what exactly is happening, refer to the
documentation for the submodules from this package.</p>
</section>
<section id="tuning-for-successful-calibration">
<h2>Tuning for Successful Calibration<a class="headerlink" href="#tuning-for-successful-calibration" title="Link to this heading">¶</a></h2>
<p>As with <a class="reference internal" href="giant.stellar_opnav.html#module-giant.stellar_opnav" title="giant.stellar_opnav"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stellar_opnav</span></code></a>, tuning the <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class is both science and art.  Indeed, tuning for
calibration is nearly the same as tuning for stellar OpNav, therefore we urge you to start with the
<a class="reference internal" href="giant.stellar_opnav.html#module-giant.stellar_opnav" title="giant.stellar_opnav"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stellar_opnav</span></code></a> documentation before proceeding with this documentation.  Once you are familiar with tuning for
stellar OpNav, then tuning for calibration will be fairly straight forward.</p>
<p>There are 2 main differences between tuning for calibration and tuning for stellar OpNav.  First, with calibration we
typically are considering many different view conditions across various temperatures and with various amounts of stray
light, which may make it difficult to find a single tuning that works to ID stars in all images under consideration.
The best way to work around this issue is to group the images into similar exposure times, temperatures, and stray light
patterns and figure out tuning for each of these groups independently using the recommended steps in
<a class="reference internal" href="giant.stellar_opnav.html#module-giant.stellar_opnav" title="giant.stellar_opnav"><code class="xref py py-mod docutils literal notranslate"><span class="pre">stellar_opnav</span></code></a>.  The <a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.html#giant.calibration.calibration_class.Calibration" title="giant.calibration.calibration_class.Calibration"><code class="xref py py-class docutils literal notranslate"><span class="pre">Calibration</span></code></a> class makes this process easy by providing the method
<a class="reference internal" href="calibration/calibration_class/giant.calibration.calibration_class.Calibration.add_images.html#giant.calibration.calibration_class.Calibration.add_images" title="giant.calibration.calibration_class.Calibration.add_images"><code class="xref py py-meth docutils literal notranslate"><span class="pre">add_images()</span></code></a> which, when coupled with calls to <a class="reference internal" href="camera/giant.camera.Camera.all_on.html#giant.camera.Camera.all_on" title="giant.camera.Camera.all_on"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Camera.all_on()</span></code></a> and <a class="reference internal" href="camera/giant.camera.Camera.all_off.html#giant.camera.Camera.all_off" title="giant.camera.Camera.all_off"><code class="xref py py-meth docutils literal notranslate"><span class="pre">Camera.all_off()</span></code></a>
makes it easy to add/consider groups of images one by one, storing the results of images that have already been
processed.</p>
<p>The second main difference between calibration and stellar OpNav is that in calibration, particularly for the camera
model estimation, we typically want as many stars as possible extracted from each image instead of just finding the
brightest stars in the image.  The best way to handle this is to work iteratively, where you first tune for getting just
bright stars and estimate and update to the attitude (and possibly the camera model if it had a poor initial guess) and
then, when you have better a priori, turn off the RANSAC feature of the <a class="reference internal" href="stellar_opnav/star_identification/giant.stellar_opnav.star_identification.StarID.html#giant.stellar_opnav.star_identification.StarID" title="giant.stellar_opnav.star_identification.StarID"><code class="xref py py-class docutils literal notranslate"><span class="pre">StarID</span></code></a> class and identify dimmer
stars.  Once this has been done you can then re-estimate an update to the camera model (and maybe the pointing for each
image).</p>
<p>The only other real tuning that might need to be done is choosing which parameters are estimated as part of the
geometric camera model calibration, which is done through the <a class="reference internal" href="camera_model/giant.camera_models.camera_model.CameraModel.html#giant.camera_models.camera_model.CameraModel.estimation_parameters" title="giant.camera_models.camera_model.CameraModel.estimation_parameters"><code class="xref py py-attr docutils literal notranslate"><span class="pre">CameraModel.estimation_parameters</span></code></a> attribute. For
many of the camera models, some of the parameters are highly correlated with each other and it is not recommended to
attempt to simultaneously estimate them unless you have a very large dataset to help break the correlation (for instance
misalignment and the principal point for the camera can be highly correlated unless you have a lot of images at
different viewing conditions).  Further details about good subsets of elements to estimate in calibration is included
with the documentation for the camera models provided with GIANT.</p>
</section>
<section id="example">
<h2>Example<a class="headerlink" href="#example" title="Link to this heading">¶</a></h2>
<p>Below shows how calibration can be used to id stars, estimate attitude corrections, estimate a camera model, and
estimate alignment.  It assumes that the <code class="xref py py-mod docutils literal notranslate"><span class="pre">generate_sample_data</span></code> script has already be run and that the
<code class="docutils literal notranslate"><span class="pre">sample_data</span></code> directory is in the current working directory.  For an in depth example using real images see the
tutorial.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nn">pickle</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">pathlib</span><span class="w"> </span><span class="kn">import</span> <span class="n">Path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># use pathlib and pickle to get the data</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">Path</span><span class="o">.</span><span class="n">cwd</span><span class="p">()</span> <span class="o">/</span> <span class="s2">&quot;sample_data&quot;</span> <span class="o">/</span> <span class="s2">&quot;camera.pickle&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="n">data</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">pfile</span><span class="p">:</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">camera</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">pfile</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># import the stellar opnav class</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">giant.calibration.calibration_class</span><span class="w"> </span><span class="kn">import</span> <span class="n">Calibration</span><span class="p">,</span> <span class="n">CalibrationOptions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># import the default catalog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">giant.catalogs.giant_catalog</span><span class="w"> </span><span class="kn">import</span> <span class="n">GIANTCatalog</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># set the estimation parameters for the camera model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">camera</span><span class="o">.</span><span class="n">model</span><span class="o">.</span><span class="n">estimation_parameters</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;fx&quot;</span><span class="p">,</span> <span class="s2">&quot;fy&quot;</span><span class="p">,</span> <span class="s2">&quot;px&quot;</span><span class="p">,</span> <span class="s2">&quot;py&quot;</span><span class="p">,</span> <span class="s2">&quot;k1&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># form the calibration object</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opts</span> <span class="o">=</span> <span class="n">CalibrationOptions</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opts</span><span class="o">.</span><span class="n">point_of_interest_finder_options</span><span class="o">.</span><span class="n">threshold</span> <span class="o">=</span> <span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opts</span><span class="o">.</span><span class="n">point_of_interest_finder_options</span><span class="o">.</span><span class="n">centroid_size</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opts</span><span class="o">.</span><span class="n">star_id_options</span><span class="o">.</span><span class="n">max_magnitude</span> <span class="o">=</span> <span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">opts</span><span class="o">.</span><span class="n">star_id_options</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="mi">20</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span> <span class="o">=</span> <span class="n">Calibration</span><span class="p">(</span><span class="n">camera</span><span class="p">,</span> <span class="n">options</span><span class="o">=</span><span class="n">opts</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># identify stars</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">id_stars</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">sid_summary</span><span class="p">()</span>  <span class="c1"># print a summary of the star id results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># estimate an update the attitude for each image</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">estimate_attitude</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># update the star id settings</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">star_id</span><span class="o">.</span><span class="n">max_magnitude</span> <span class="o">=</span> <span class="mf">5.5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">star_id</span><span class="o">.</span><span class="n">tolerance</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">star_id</span><span class="o">.</span><span class="n">max_combos</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># identify stars again to get dimmer stars</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">id_stars</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># import the visualizer to look at the results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span><span class="w"> </span><span class="nn">giant.stellar_opnav.visualizer</span><span class="w"> </span><span class="kn">import</span> <span class="n">show_id_results</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">show_id_results</span><span class="p">(</span><span class="n">cal</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># estimate the geometric camera model</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">estimate_geometric_calibration</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">cal</span><span class="o">.</span><span class="n">geometric_calibration_summary</span><span class="p">()</span>
</pre></div>
</div>
</section>
<p class="rubric">Modules</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="calibration/giant.calibration.calibration_class.html#module-giant.calibration.calibration_class" title="giant.calibration.calibration_class"><code class="xref py py-obj docutils literal notranslate"><span class="pre">calibration_class</span></code></a></p></td>
<td><p>This module provides a subclass of the <a class="reference internal" href="opnav_class/giant.opnav_class.OpNav.html#giant.opnav_class.OpNav" title="giant.opnav_class.OpNav"><code class="xref py py-class docutils literal notranslate"><span class="pre">OpNav</span></code></a> class for performing stellar OpNav and camera calibration.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="calibration/giant.calibration.estimators.html#module-giant.calibration.estimators" title="giant.calibration.estimators"><code class="xref py py-obj docutils literal notranslate"><span class="pre">estimators</span></code></a></p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="calibration/giant.calibration.visualizer.html#module-giant.calibration.visualizer" title="giant.calibration.visualizer"><code class="xref py py-obj docutils literal notranslate"><span class="pre">visualizer</span></code></a></p></td>
<td><p>This module provides utilities for visually inspecting calibration and alignment results.</p></td>
</tr>
</tbody>
</table>
<div class="line-block">
<div class="line"><br /></div>
</div>
</section>


          </div>
              <div class="related bottom">
                &nbsp;
  <nav id="rellinks">
    <ul>
        <li>
          &larr;
          <a href="catalogs/utilities/giant.catalogs.utilities.MJD_EPOCH.html" title="Previous document">giant.catalogs.utilities.MJD_EPOCH</a>
        </li>
        <li>
          <a href="calibration/giant.calibration.calibration_class.html" title="Next document">giant.calibration.calibration_class</a>
          &rarr;
        </li>
    </ul>
  </nav>
              </div>
          
        </div>
      </div>
    <div class="clearer"></div>
  </div>
<div class="footer">
    <div style="display:inline-block;vertical-align:middle;">
        <img src="/_static/NASA_logo.svg" alt="NASA" style="width:80px;height:80px;">
    </div>
    <div style="display:inline-block;vertical-align:middle;">
        &copy;2023 United States Government | 
        NASA Official: <a href="mailto:andrew.j.liounis@nasa.gov">Andrew Liounis</a> |
        Curator: <a href="mailto:andrew.j.liounis@nasa.gov">Andrew Liounis</a>
        <br>
        Last updated on Sep 03, 2025 |
        
        |
        Powered by <a href="http://sphinx-doc.org/">Sphinx 8.2.3</a>
        &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 1.0.0</a>
        
        |
        <a href="https://www.nasa.gov/about/highlights/HP_Privacy.html">Privacy Policy/Notices</a>
    </div>
</div>
  </body>
</html>